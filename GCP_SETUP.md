# GCP Firestore 설정 가이드 (PRD 저장 기능용)

이 문서는 'PRD 자동 생성 AI 에이전트'의 PRD 저장 및 관리 기능을 활성화하기 위한 Google Cloud Platform (GCP) Firestore 설정 방법을 안내합니다.

## 설정 개요

1.  **GCP 프로젝트 생성 및 Firestore 활성화**
2.  **서비스 계정 생성 및 키 파일 다운로드**
3.  **프로젝트에 키 파일 추가 및 환경 변수 설정**

---

## 1. GCP 프로젝트 생성 및 Firestore 활성화

### 1-1. GCP 프로젝트 생성
- 이미 GCP 프로젝트가 있다면 해당 프로젝트를 사용해도 됩니다.
- 없다면 [GCP 콘솔](https://console.cloud.google.com/)로 이동하여 새 프로젝트를 생성합니다.

### 1-2. Firestore 데이터베이스 활성화
1.  GCP 콘솔에서 방금 생성한 프로젝트를 선택합니다.
2.  왼쪽 탐색 메뉴 하단의 **'모든 제품 보기'**를 클릭하거나, 상단의 검색창에서 'Firestore'를 직접 검색합니다.
3.  제품 목록의 **'데이터베이스'** 섹션에서 **'Firestore'**를 찾아 클릭합니다.
4.  **"네이티브 모드"**를 선택하여 데이터베이스를 만듭니다. (Firestore in Native mode)
5.  데이터베이스 위치(리전)를 선택합니다. (예: `asia-northeast3` for Seoul)
6.  `데이터베이스 만들기`를 클릭하여 활성화를 완료합니다.

---

## 2. 서비스 계정 생성 및 키 파일 다운로드

백엔드 서버가 GCP Firestore에 접근하려면 인증이 필요합니다. 이를 위해 서비스 계정을 사용합니다.

1.  GCP 콘솔에서 `IAM 및 관리자` > `서비스 계정`으로 이동합니다.
2.  상단의 `+ 서비스 계정 만들기`를 클릭합니다.
3.  서비스 계정 이름을 입력합니다. (예: `prd-automation-agent-service`)
4.  `만들고 계속하기`를 클릭합니다.
5.  **역할 선택** 단계에서 **`Cloud Datastore 사용자`** 역할을 검색하여 추가합니다. 이 역할은 서버가 Firestore에 데이터를 읽고 쓸 수 있는 필수 권한입니다.
    *   **팁:** 만약 역할이 검색되지 않는다면, 역할 검색창의 필터를 모두 지우고 다시 검색해보세요. (예: 'Firebase 서비스' 필터 제거)
6.  `계속`을 누르고, `완료`를 클릭하여 서비스 계정 생성을 마칩니다.
7.  방금 생성한 서비스 계정의 이메일 주소를 클릭합니다.
8.  `키` 탭으로 이동하여 `키 추가` > `새 키 만들기`를 선택합니다.
9.  키 유형으로 **JSON**을 선택하고 `만들기`를 클릭합니다.
10. 키 파일(`.json` 형식)이 컴퓨터에 자동으로 다운로드됩니다. **이 파일은 절대 외부에 노출되어서는 안 됩니다.**

---

## 3. 프로젝트에 키 파일 추가 및 환경 변수 설정

### 3-1. 키 파일 위치
- 다운로드한 JSON 키 파일의 이름을 `gcp-key.json`으로 변경합니다.
- 이 `gcp-key.json` 파일을 프로젝트의 루트 디렉토리( `server.js` 파일이 있는 위치)에 복사합니다.
- **중요:** `.gitignore` 파일에 `gcp-key.json`